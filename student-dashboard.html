<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√ñƒürenci Paneli - CyberEdu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1e40af',
                        secondary: '#dc2626',
                        accent: '#059669',
                        cyber: '#6366f1',
                        dark: '#0f172a'
                    }
                },
                fontFamily: {
                    sans: ['Inter', 'sans-serif'],
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50 min-h-screen flex">
    <!-- Sidebar -->
    <aside class="bg-dark text-white w-64 min-h-screen fixed left-0 top-0 z-20 hidden md:block">
        <div class="p-4">
            <a href="student-dashboard.html" class="font-bold text-xl text-cyber block mb-8 flex items-center">
                <i class="fas fa-shield-alt text-2xl mr-3"></i>
                CyberEdu
            </a>
            
            <div class="mb-8">
                <div class="flex items-center mb-4">
                    <div>
                        <p class="font-medium" id="user-name"></p>
                        <p class="text-sm text-gray-400" id="user-email"></p>
                    </div>
                </div>
            </div>
            
            <nav class="space-y-1">
                <a href="student-dashboard.html" class="flex items-center px-4 py-3 rounded-lg bg-slate-800">
                    <i class="fas fa-tachometer-alt mr-3 text-cyber"></i>
                    <span>Genel Bakƒ±≈ü</span>
                </a>
                <a href="courses.html" class="flex items-center px-4 py-3 rounded-lg hover:bg-slate-800">
                    <i class="fas fa-graduation-cap mr-3"></i>
                    <span>Eƒüitim Mod√ºlleri</span>
                </a>
                <a href="progress.html" class="flex items-center px-4 py-3 rounded-lg hover:bg-slate-800">
                    <i class="fas fa-chart-line mr-3"></i>
                    <span>ƒ∞lerlemem</span>
                </a>
                <a href="my-notes.html" class="flex items-center px-4 py-3 rounded-lg hover:bg-slate-800">
                    <i class="fas fa-sticky-note mr-3"></i>
                    <span>Notlarƒ±m</span>
                </a>
                <a href="downloads.html" class="flex items-center px-4 py-3 rounded-lg hover:bg-slate-800">
                    <i class="fas fa-download mr-3"></i>
                    <span>Kaynaklar</span>
                </a>
                <a href="account.html" class="flex items-center px-4 py-3 rounded-lg hover:bg-slate-800">
                    <i class="fas fa-user-cog mr-3"></i>
                    <span>Profil Ayarlarƒ±</span>
                </a>
            </nav>

            <div class="absolute bottom-0 left-0 w-full p-4 border-t border-slate-800">
                <a href="index.html" class="flex items-center text-gray-400 hover:text-white">
                    <i class="fas fa-sign-out-alt mr-3"></i>
                    <span>√áƒ±kƒ±≈ü Yap</span>
                </a>
            </div>
        </div>
    </aside>

    <!-- Main content -->
    <main class="md:ml-64 p-4 md:p-8 w-full min-h-screen">
        <div class="max-w-7xl mx-auto">
            <!-- Header -->
            <header class="mb-8">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-3xl font-bold text-gray-900 mb-2">Genel Bakƒ±≈ü</h1>
                        <p class="text-gray-600">Bilgi Sistemleri ve G√ºvenlik Eƒüitimi ƒ∞lerlemeniz</p>
                    </div>
                    <div class="text-right">
                        <p class="text-lg font-semibold text-gray-900" id="header-user-name"></p>
                        <p class="text-sm text-gray-500" id="user-department"></p>
                    </div>
                </div>
            </header>

            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-sm font-medium text-gray-600">Tamamlanan Mod√ºller</h3>
                        <div class="h-10 w-10 bg-accent/10 text-accent rounded-lg flex items-center justify-center">
                            <i class="fas fa-check-circle"></i>
                        </div>
                    </div>
                    <p class="text-2xl font-bold text-gray-900" id="completed-modules">0</p>
                    <p class="text-xs text-gray-500 mt-1">/ <span id="total-modules">8</span> mod√ºl</p>
                </div>
                
                <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-sm font-medium text-gray-600">ƒ∞zlenen Videolar</h3>
                        <div class="h-10 w-10 bg-cyber/10 text-cyber rounded-lg flex items-center justify-center">
                            <i class="fas fa-play-circle"></i>
            </div>
        </div>
                    <p class="text-2xl font-bold text-gray-900" id="watched-videos">0</p>
                    <p class="text-xs text-gray-500 mt-1">/ <span id="total-videos">24</span> video</p>
    </div>

                <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-sm font-medium text-gray-600">Sƒ±nav Ba≈üarƒ±sƒ±</h3>
                        <div class="h-10 w-10 bg-primary/10 text-primary rounded-lg flex items-center justify-center">
                            <i class="fas fa-trophy"></i>
                        </div>
                    </div>
                    <p class="text-2xl font-bold text-gray-900" id="exam-average">0</p>
                    <p class="text-xs text-gray-500 mt-1">ortalama puan</p>
            </div>
            
                <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-sm font-medium text-gray-600">G√ºvenlik Seviyesi</h3>
                        <div class="h-10 w-10 bg-secondary/10 text-secondary rounded-lg flex items-center justify-center">
                            <i class="fas fa-shield-alt"></i>
        </div>
                    </div>
                    <p class="text-2xl font-bold text-gray-900" id="security-level">Ba≈ülangƒ±√ß</p>
                    <p class="text-xs text-gray-500 mt-1" id="security-description">Temel seviye</p>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Progress Overview -->
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
                        <h2 class="text-xl font-semibold mb-4 flex items-center">
                            <i class="fas fa-chart-line text-primary mr-2"></i>
                            ƒ∞lerleme Durumu
                        </h2>
                        
                        <div class="mb-6">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-sm font-medium text-gray-600">Genel ƒ∞lerleme</span>
                                <span class="text-sm font-bold text-primary" id="overall-progress">0%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div class="bg-gradient-to-r from-primary to-cyber h-3 rounded-full transition-all duration-500" style="width: 0%" id="progress-bar"></div>
                            </div>
                        </div>
                        
                        <!-- Module Progress -->
                        <div class="space-y-4" id="module-progress-list">
                            <!-- Module progress will be loaded here -->
                        </div>
                    </div>

                    <!-- Continue Watching -->
                    <div class="bg-white rounded-xl shadow-sm p-6" id="continue-watching-section">
                        <h2 class="text-xl font-semibold mb-4 flex items-center">
                            <i class="fas fa-play text-cyber mr-2"></i>
                            Kaldƒ±ƒüƒ±n Yerden Devam Et
                        </h2>
                        
                        <div class="flex items-center p-4 bg-gradient-to-r from-cyber/10 to-primary/10 rounded-lg border border-cyber/20" id="continue-watching-content">
                            <!-- Continue watching content will be loaded here -->
                                </div>
                                </div>
                            </div>

                <!-- Sidebar -->
                <div class="lg:col-span-1">
                    <!-- Current Tasks -->
                    <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="fas fa-tasks text-accent mr-2"></i>
                            Aktif G√∂revler
                        </h3>
                        
                        <div class="space-y-3" id="active-tasks">
                            <!-- Active tasks will be loaded here -->
                        </div>
                    </div>

                    <!-- Recent Achievements -->
                    <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
                        <h3 class="text-lg font-semibold mb-4 flex items-center">
                            <i class="fas fa-award text-yellow-500 mr-2"></i>
                            Son Ba≈üarƒ±lar
                        </h3>
                        
                        <div class="space-y-3" id="recent-achievements">
                            <!-- Recent achievements will be loaded here -->
                        </div>
                    </div>

                    <!-- Security Tips -->
                    <div class="bg-gradient-to-br from-secondary/10 to-primary/10 rounded-xl p-6 border border-secondary/20">
                        <h3 class="text-lg font-semibold mb-4 flex items-center text-secondary">
                            <i class="fas fa-lightbulb mr-2"></i>
                            G√ºn√ºn G√ºvenlik ƒ∞pucu
                        </h3>
                        
                        <div class="bg-white/50 rounded-lg p-4" id="security-tip">
                            <!-- Security tip will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
            
    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    
    <!-- Firebase Production DB -->
    <script src="js/firebase-production.js"></script>
    <script src="js/user-utils.js"></script>
    <script src="js/main.js"></script>

    <script>
        // Initialize page
        document.addEventListener('DOMContentLoaded', async function() {
            // Initialize user info using UserUtils
            await UserUtils.initializeUserInfo();
            
            // Load Firebase data
            await loadDashboardData();
            await loadContinueWatching(); 
            await loadProgressOverview(); 
            await loadActiveTasks();
            await loadRecentAchievements();
            await loadSecurityTip();
        });
        
        // Load real dashboard data from Firebase
        async function loadDashboardData() {
            try {
                const userEmail = localStorage.getItem('userEmail');
                if (!userEmail) return;
                
                console.log('üìä Dashboard verileri y√ºkleniyor...');
                
                // Wait for Firebase to be ready
                await new Promise(resolve => {
                    const checkDB = () => {
                        if (window.DB) {
                            resolve();
                        } else {
                            setTimeout(checkDB, 100);
                        }
                    };
                    checkDB();
                });
                
                // Load user profile
                const profileResult = await window.DB.load('userProfiles');
                const profiles = (profileResult && profileResult.success) ? profileResult.data : [];
                const userProfile = profiles.find(p => p.userEmail === userEmail);
                
                if (userProfile) {
                    document.getElementById('user-department').textContent = getDepartmentName(userProfile.department);
                }
                
                // Load modules
                const modulesResult = await window.DB.loadModules();
                const modules = (modulesResult && modulesResult.success) ? modulesResult.data : [];
                
                // Load user progress
                const progressResult = await window.DB.load('userProgress');
                const progressData = (progressResult && progressResult.success) ? progressResult.data : [];
                const userProgressData = progressData.filter(p => p.userEmail === userEmail);
                
                // Load coordinator videos
                const videosResult = await window.DB.load('coordinatorVideos');
                const videos = (videosResult && videosResult.success) ? videosResult.data : [];
                
                // Calculate real statistics
                const completedModules = userProgressData.filter(p => p.completionRate >= 100).length;
                const totalModules = modules.length || 8;
                const watchedVideos = userProgressData.reduce((sum, p) => sum + (p.watchedVideos || 0), 0);
                const totalVideos = videos.length || 24;
                const examAverage = userProgressData.reduce((sum, p) => sum + (p.examScore || 0), 0) / Math.max(userProgressData.length, 1);
                
                // Update UI
                document.getElementById('completed-modules').textContent = completedModules;
                document.getElementById('total-modules').textContent = totalModules;
                document.getElementById('watched-videos').textContent = watchedVideos;
                document.getElementById('total-videos').textContent = totalVideos;
                document.getElementById('exam-average').textContent = Math.round(examAverage) || 0;
                
                // Update security level based on progress
                updateSecurityLevel(completedModules, totalModules, examAverage);
                
                console.log('‚úÖ Dashboard verileri y√ºklendi');
                
            } catch (error) {
                console.error('‚ùå Dashboard veri y√ºkleme hatasƒ±:', error);
            }
        }
        
        // Load continue watching video
        async function loadContinueWatching() {
            try {
                const userEmail = localStorage.getItem('userEmail');
                if (!userEmail) return;
                
                console.log('üì∫ Devam edilen video y√ºkleniyor...');
                
                // Get user progress data
                const progressResult = await window.DB.load('userProgress');
                const progressData = (progressResult && progressResult.success) ? progressResult.data : [];
                const userProgress = progressData.find(p => p.userEmail === userEmail);
                
                // Get coordinator videos
                const videosResult = await window.DB.load('coordinatorVideos');
                const videos = (videosResult && videosResult.success) ? videosResult.data : [];
                
                let continueVideo = null;
                
                if (userProgress && userProgress.lastWatchedVideo) {
                    // Find the last watched video
                    continueVideo = videos.find(v => v.id === userProgress.lastWatchedVideo);
                } else if (videos.length > 0) {
                    // Use first available video
                    continueVideo = videos[0];
                }
                
                const continueWatchingContent = document.getElementById('continue-watching-content');
                
                if (continueVideo) {
                    continueWatchingContent.innerHTML = `
                        <div class="flex items-center space-x-4">
                            <div class="w-16 h-16 bg-gradient-to-br from-cyber to-primary rounded-lg flex items-center justify-center">
                                <i class="fas fa-play text-white text-xl"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-semibold text-gray-900">${continueVideo.title}</h4>
                                <p class="text-sm text-gray-600">Mod√ºl ${continueVideo.moduleId}</p>
                                <p class="text-xs text-gray-500 mt-1">${continueVideo.duration} dakika</p>
                            </div>
                            <a href="module-detail.html?module=${continueVideo.moduleId}&video=${continueVideo.id}" 
                               class="bg-cyber text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                                <i class="fas fa-play mr-1"></i>
                                Devam Et
                            </a>
                                    </div>
                    `;
                } else {
                    continueWatchingContent.innerHTML = `
                        <div class="text-center py-8">
                            <i class="fas fa-video text-gray-400 text-3xl mb-3"></i>
                            <p class="text-gray-600">Hen√ºz video izlemeye ba≈ülamadƒ±nƒ±z</p>
                            <a href="courses.html" class="inline-block mt-3 bg-cyber text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                                Eƒüitime Ba≈üla
                            </a>
                        </div>
                    `;
                }
                
            } catch (error) {
                console.error('‚ùå Continue watching y√ºkleme hatasƒ±:', error);
            }
        }
        
        // Load progress overview
        async function loadProgressOverview() {
            try {
                const userEmail = localStorage.getItem('userEmail');
                if (!userEmail) return;
                
                console.log('üìä ƒ∞lerleme √∂zeti y√ºkleniyor...');
                
                // Get modules and user progress
                const modulesResult = await window.DB.loadModules();
                const modules = (modulesResult && modulesResult.success) ? modulesResult.data : [];
                
                const progressResult = await window.DB.load('userProgress');
                const progressData = (progressResult && progressResult.success) ? progressResult.data : [];
                const userProgressData = progressData.filter(p => p.userEmail === userEmail);
                
                // Calculate overall progress
                const totalModules = modules.length || 8;
                const completedModules = userProgressData.filter(p => p.completionRate >= 100).length;
                const totalProgress = Math.round((completedModules / totalModules) * 100);
                
                // Update progress overview UI
                updateProgressOverviewUI(totalProgress, completedModules, totalModules);
                
                // Load module progress list
                loadModuleProgressList(modules, userProgressData);
                
            } catch (error) {
                console.error('‚ùå Progress overview y√ºkleme hatasƒ±:', error);
            }
        }
        
        // Update progress overview UI
        function updateProgressOverviewUI(totalProgress, completedModules, totalModules) {
            // Update progress bar
            const progressBar = document.getElementById('progress-bar');
            if (progressBar) {
                progressBar.style.width = `${totalProgress}%`;
            }
            
            // Update overall progress text
            const overallProgress = document.getElementById('overall-progress');
            if (overallProgress) {
                overallProgress.textContent = `${totalProgress}%`;
            }
            
            // Update security level based on progress
            updateSecurityLevel(completedModules, totalModules, totalProgress);
        }
        
        // Load module progress list
        function loadModuleProgressList(modules, userProgressData) {
            const moduleProgressList = document.getElementById('module-progress-list');
            if (!moduleProgressList) return;
            
            const cyberModules = [
                { id: 1, title: "Bilgi G√ºvenliƒüi Temelleri", description: "Temel g√ºvenlik kavramlarƒ± ve prensipler" },
                { id: 2, title: "Kriptoloji ve ≈ûifreleme", description: "≈ûifreleme algoritmalarƒ± ve uygulamalarƒ±" },
                { id: 3, title: "Aƒü G√ºvenliƒüi", description: "Aƒü protokolleri ve g√ºvenlik mekanizmalarƒ±" },
                { id: 4, title: "Web G√ºvenliƒüi", description: "Web uygulamalarƒ± ve g√ºvenlik a√ßƒ±klarƒ±" },
                { id: 5, title: "Malware Analizi", description: "Zararlƒ± yazƒ±lƒ±m tespiti ve analizi" },
                { id: 6, title: "Penetrasyon Testleri", description: "G√ºvenlik testleri ve deƒüerlendirme" },
                { id: 7, title: "Incident Response", description: "G√ºvenlik olaylarƒ±na m√ºdahale" },
                { id: 8, title: "Compliance ve Standartlar", description: "G√ºvenlik standartlarƒ± ve uyumluluk" }
            ];
            
            moduleProgressList.innerHTML = '';
            
            cyberModules.forEach(module => {
                const userProgress = userProgressData.find(p => p.moduleId === module.id) || { completionRate: 0 };
                const progressPercent = userProgress.completionRate || 0;
                
                const moduleDiv = document.createElement('div');
                moduleDiv.className = 'flex items-center justify-between p-4 bg-gray-50 rounded-lg';
                moduleDiv.innerHTML = `
                    <div class="flex items-center space-x-4">
                        <div class="w-10 h-10 bg-gradient-to-br from-cyber to-primary rounded-lg flex items-center justify-center">
                            <i class="fas ${getModuleIcon(module.id)} text-white"></i>
                                </div>
                                <div>
                            <h4 class="font-medium text-gray-900">${module.title}</h4>
                            <p class="text-sm text-gray-600">${module.description}</p>
                            </div>
                    </div>
                    <div class="text-right">
                        <div class="w-16 h-2 bg-gray-200 rounded-full">
                            <div class="h-2 bg-gradient-to-r from-cyber to-primary rounded-full" style="width: ${progressPercent}%"></div>
                                </div>
                        <p class="text-xs text-gray-500 mt-1">${Math.round(progressPercent)}%</p>
                    </div>
                `;
                moduleProgressList.appendChild(moduleDiv);
            });
        }
        
        // Load active tasks
        async function loadActiveTasks() {
            try {
                const userEmail = localStorage.getItem('userEmail');
                if (!userEmail) return;
                
                // Get user progress to determine tasks
                const progressResult = await window.DB.load('userProgress');
                const progressData = (progressResult && progressResult.success) ? progressResult.data : [];
                const userProgressData = progressData.filter(p => p.userEmail === userEmail);
                
                const completedModules = userProgressData.filter(p => p.completionRate >= 100).length;
                const activeTasksContainer = document.getElementById('active-tasks');
                
                let tasks = [];
                
                if (completedModules === 0) {
                    tasks = [
                        { name: 'ƒ∞lk Mod√ºl√º Ba≈ülat', status: 'Bekliyor', color: 'cyber', icon: 'fa-play' },
                        { name: 'Profil Bilgilerini Tamamla', status: 'Bekliyor', color: 'accent', icon: 'fa-user' }
                    ];
                } else if (completedModules < 3) {
                    tasks = [
                        { name: 'Kriptoloji Mod√ºl√ºn√º Tamamla', status: 'Devam Ediyor', color: 'primary', icon: 'fa-key' },
                        { name: 'ƒ∞lk Sƒ±navƒ± Ge√ß', status: 'Hazƒ±r', color: 'secondary', icon: 'fa-clipboard-check' }
                    ];
                } else if (completedModules < 6) {
                    tasks = [
                        { name: 'Penetrasyon Testi Pratiƒüi', status: 'Yeni', color: 'secondary', icon: 'fa-bug' },
                        { name: 'G√ºvenlik Projesi', status: 'Devam Ediyor', color: 'accent', icon: 'fa-project-diagram' }
                    ];
                } else {
                    tasks = [
                        { name: 'Final Projesi', status: 'Hazƒ±r', color: 'primary', icon: 'fa-trophy' },
                        { name: 'Sertifika Sƒ±navƒ±', status: 'Bekliyor', color: 'cyber', icon: 'fa-certificate' }
                    ];
                }
                
                activeTasksContainer.innerHTML = tasks.map(task => `
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 bg-${task.color}/10 text-${task.color} rounded-lg flex items-center justify-center">
                                <i class="fas ${task.icon}"></i>
                            </div>
                            <div>
                                <p class="font-medium text-gray-900 text-sm">${task.name}</p>
                                <p class="text-xs text-gray-500">${task.status}</p>
                            </div>
                        </div>
                        <span class="text-xs px-2 py-1 bg-${task.color}/10 text-${task.color} rounded-full">${task.status}</span>
                    </div>
                `).join('');
                
            } catch (error) {
                console.error('‚ùå Active tasks y√ºkleme hatasƒ±:', error);
            }
        }
        
        // Load recent achievements
        async function loadRecentAchievements() {
            try {
                const userEmail = localStorage.getItem('userEmail');
                if (!userEmail) return;
                
                // Get user progress to determine achievements
                const progressResult = await window.DB.load('userProgress');
                const progressData = (progressResult && progressResult.success) ? progressResult.data : [];
                const userProgressData = progressData.filter(p => p.userEmail === userEmail);
                
                const recentAchievementsContainer = document.getElementById('recent-achievements');
                const completedModules = userProgressData.filter(p => p.completionRate >= 100).length;
                
                let achievements = [];
                
                if (completedModules >= 1) {
                    achievements.push({
                        title: 'ƒ∞lk Adƒ±m',
                        description: 'ƒ∞lk mod√ºl√º tamamladƒ±nƒ±z',
                        icon: 'fa-star',
                        color: 'accent',
                        date: 'Bug√ºn'
                    });
                }
                
                if (completedModules >= 3) {
                    achievements.push({
                        title: 'G√ºvenlik Uzmanƒ±',
                        description: 'Temel g√ºvenlik mod√ºllerini tamamladƒ±nƒ±z',
                        icon: 'fa-shield-alt',
                        color: 'primary',
                        date: '2 g√ºn √∂nce'
                    });
                }
                
                if (completedModules >= 5) {
                    achievements.push({
                        title: 'Kriptoloji Ustasƒ±',
                        description: '≈ûifreleme konularƒ±nda uzmanla≈ütƒ±nƒ±z',
                        icon: 'fa-key',
                        color: 'cyber',
                        date: '1 hafta √∂nce'
                    });
                }
                
                if (achievements.length === 0) {
                    achievements = [
                        {
                            title: 'Ho≈ü Geldiniz!',
                            description: 'Eƒüitime ba≈üladƒ±ƒüƒ±nƒ±z i√ßin tebrikler',
                            icon: 'fa-graduation-cap',
                            color: 'cyber',
                            date: 'Yeni'
                        }
                    ];
                }
                
                recentAchievementsContainer.innerHTML = achievements.map(achievement => `
                    <div class="flex items-center space-x-3 p-3 bg-${achievement.color}/5 rounded-lg border border-${achievement.color}/20">
                        <div class="w-8 h-8 bg-${achievement.color}/10 text-${achievement.color} rounded-lg flex items-center justify-center">
                            <i class="fas ${achievement.icon}"></i>
                        </div>
                        <div class="flex-1">
                            <p class="font-medium text-gray-900 text-sm">${achievement.title}</p>
                            <p class="text-xs text-gray-600">${achievement.description}</p>
                        </div>
                        <span class="text-xs text-gray-500">${achievement.date}</span>
                    </div>
                `).join('');
                
            } catch (error) {
                console.error('‚ùå Recent achievements y√ºkleme hatasƒ±:', error);
            }
        }
        
        // Load security tip
        function loadSecurityTip() {
            const securityTips = [
                "G√º√ßl√º ≈üifreler her zaman b√ºy√ºk harf, k√º√ß√ºk harf, rakam ve √∂zel karakter i√ßermelidir.",
                "ƒ∞ki fakt√∂rl√º kimlik doƒürulama (2FA) hesap g√ºvenliƒüinizi %99 artƒ±rƒ±r.",
                "≈û√ºpheli e-postalarƒ±n eklerini asla a√ßmayƒ±n ve linklerine tƒ±klamayƒ±n.",
                "Yazƒ±lƒ±mlarƒ±nƒ±zƒ± ve i≈ületim sisteminizi d√ºzenli olarak g√ºncelleyin.",
                "Genel Wi-Fi aƒülarƒ±nda hassas i≈ülemler yapmaktan ka√ßƒ±nƒ±n.",
                "D√ºzenli veri yedekleme alarak fidye yazƒ±lƒ±mlarƒ±na kar≈üƒ± korunun.",
                "Sosyal m√ºhendislik saldƒ±rƒ±larƒ±na kar≈üƒ± dikkatli olun.",
                "VPN kullanarak internet trafiƒüinizi ≈üifreleyin."
            ];
            
            const randomTip = securityTips[Math.floor(Math.random() * securityTips.length)];
            const securityTipContainer = document.getElementById('security-tip');
            
            securityTipContainer.innerHTML = `
                <div class="flex items-start space-x-3">
                    <i class="fas fa-shield-alt text-secondary text-lg mt-1"></i>
                    <p class="text-sm text-gray-700 leading-relaxed">${randomTip}</p>
                </div>
            `;
        }
        
        // Update security level
        function updateSecurityLevel(completedModules, totalModules, examAverage) {
            const progressPercent = (completedModules / totalModules) * 100;
            let level = 'Ba≈ülangƒ±√ß';
            let description = 'Temel seviye';
            
            if (progressPercent >= 90 && examAverage >= 85) {
                level = 'Siber G√ºvenlik Uzmanƒ±';
                description = 'Uzman seviye';
            } else if (progressPercent >= 70 && examAverage >= 75) {
                level = 'G√ºvenlik Analisti';
                description = 'ƒ∞leri seviye';
            } else if (progressPercent >= 50 && examAverage >= 65) {
                level = 'G√ºvenlik Teknisyeni';
                description = 'Orta seviye';
            } else if (progressPercent >= 25) {
                level = 'G√ºvenlik √ñƒürencisi';
                description = 'Geli≈üen seviye';
            }
            
            document.getElementById('security-level').textContent = level;
            document.getElementById('security-description').textContent = description;
        }
        
        // Helper functions
        function getDepartmentName(departmentCode) {
            const departments = {
                'bilgisayar-muhendisligi': 'Bilgisayar M√ºhendisliƒüi',
                'bilisim-sistemleri': 'Bili≈üim Sistemleri',
                'siber-guvenlik': 'Siber G√ºvenlik',
                'yazilim-muhendisligi': 'Yazƒ±lƒ±m M√ºhendisliƒüi',
                'bilgisayar-programciligi': 'Bilgisayar Programcƒ±lƒ±ƒüƒ±'
            };
            return departments[departmentCode] || 'Bilgi Teknolojileri';
        }
        
        function getModuleIcon(moduleId) {
            const icons = {
                1: 'fa-shield-alt',
                2: 'fa-key',
                3: 'fa-network-wired',
                4: 'fa-globe',
                5: 'fa-bug',
                6: 'fa-search',
                7: 'fa-exclamation-triangle',
                8: 'fa-certificate'
            };
            return icons[moduleId] || 'fa-book';
        }
    </script>
</body>
</html> 